<!-- Registration Page -->
<!-- Referenced from Lab 14 as well as from StackExchange and W3Schools -->

<script>
  window.onload = function () {
    var urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("username")) { //Gets username 
      f.fullname.value = urlParams.get("fullname"); //full name matches from form
      f.username.value = urlParams.get("username"); //username matches from form
      f.email.value = urlParams.get("email"); //email matches from form
      f.password.value = urlParams.get("password"); //password matches from form
      f.repeat_password.value = urlParams.get("repeat_password"); //repeat password matches from form
      if (urlParams.has("username_error")) { //if there are username errors, get username errors
        username_label.innerHTML = urlParams.get("username_error");
      }
      if (urlParams.has("fullname_error")) { //if there are fullname errors, get fullname errors 
        fullname_label.innerHTML = urlParams.get("fullname_error");
      }
      if (urlParams.has("email_error")) { //if there are fullname errors, get fullname errors 
        fullname_label.innerHTML = urlParams.get("email_error");
      }
      checkpassword();
    }
  }
</script>

<html lang="en">
<link href="stylesheet.css" rel="stylesheet">

<head>
  <h1>Marcus and Tyler's Lululemon Store!! :)</h1>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Sign Up</title>
</head>

<body>

  <script>
    function checkpassword() {
      var p = f.password.value;
      var cp = f.repeat_password.value;
      //checks if both passwords are the same
      if (p == cp) {
      } else {
        // show error message that says passwords don't match, please retype
        alert("Passwords Don't Match. Please retype");
        response.redirect("/registration.html?");
      }
    }
  </script>

  <script>
  //Tells user what to do if an error is detected
  //Makes the data sticky when incorrectly inputted
  //Email: x@y.z format and address contains only numbers, letters and _. in the beginning
  //Password: Is a minimum of 6 characters, any characters are valid
  </script>

  <body>
    <div>
      <form name="f" method="POST" action="">
        <input type="text" name="fullname" size="40" maxlength="30" placeholder="Enter First & Last Name" required
          title="Only Letters and add a space"><label for="fullname" id="fullname_label"></label><br />
        <input type="text" name="username" size="40" required title="Either 4-10 Characters & only numbers/letters"
          placeholder="Enter Username"><label for="username" id="username_label"></label><br />
        <input type="email" name="email" size="40" placeholder="Enter Email"><label for="email"
          id="email_label"></label><br />
        <input type="password" id="password" name="password" size="40" pattern=".{6,}" required
          title="6 characters minimum" placeholder="Enter Password"><br />
        <input type="password" id="repeat_password" name="repeat_password" size="40" pattern=".{6,}" required
          title="6 characters minimum" placeholder="Enter Password Again"><br />
        <input type="submit" value="Submit" id="submit" value="checkpassword" onclick="checkpassword()">
      </form>
    </div>
    <script>
    </script>
  </body>
</body>

</html>